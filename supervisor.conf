[program:core-pipeline]
; 程序名称
command=bash -c "source services/core-pipeline/.venv/bin/activate && uv run services/core-pipeline/start_server.py --port 50051 --config-path services/core-pipeline/config/default.yaml"
; 工作目录
directory=/root/autodl-guard
; 自动启动
autostart=true
; 自动重启
autorestart=true
; 启动重试次数
startretries=3
; 用户
user=root
; 重定向stderr到stdout
redirect_stderr=true
; 标准输出日志文件
stdout_logfile=/root/autodl-guard/logs/core-pipeline.log
; 标准输出日志文件最大大小
stdout_logfile_maxbytes=10MB
; 标准输出日志文件备份数量
stdout_logfile_backups=5
; 标准输出日志级别
stdout_capture_maxbytes=1MB
; 标准输出事件监听器
stdout_events_enabled=false
; 标准错误日志文件
stderr_logfile=/root/autodl-guard/logs/core-pipeline_error.log
; 标准错误日志文件最大大小
stderr_logfile_maxbytes=10MB
; 标准错误日志文件备份数量
stderr_logfile_backups=5
; 进程优先级
priority=999
; 停止信号
stopsignal=INT
; 停止等待时间
stopwaitsecs=10
; 停止时是否杀死子进程
killasgroup=true
; 环境变量
environment=PYTHONPATH="/root/autodl-guard",PIP_INDEX_URL="https://pypi.tuna.tsinghua.edu.cn/simple",PIP_TRUSTED_HOST="pypi.tuna.tsinghua.edu.cn",HF_ENDPOINT="https://hf-mirror.com"

[program:framaist-milvus]
; 程序名称
command=bash -c "source services/FramAist-Milvus/.venv/bin/activate && uv run services/FramAist-Milvus/start_server.py --port 50052 --config-path services/FramAist-Milvus/config/default.yaml"
; 工作目录
directory=/root/autodl-guard
; 自动启动
autostart=true
; 自动重启
autorestart=true
; 启动重试次数
startretries=3
; 用户
user=root
; 重定向stderr到stdout
redirect_stderr=true
; 标准输出日志文件
stdout_logfile=/root/autodl-guard/logs/framaist-milvus.log
; 标准输出日志文件最大大小
stdout_logfile_maxbytes=10MB
; 标准输出日志文件备份数量
stdout_logfile_backups=5
; 标准输出日志级别
stdout_capture_maxbytes=1MB
; 标准输出事件监听器
stdout_events_enabled=false
; 标准错误日志文件
stderr_logfile=/root/autodl-guard/logs/framaist-milvus_error.log
; 标准错误日志文件最大大小
stderr_logfile_maxbytes=10MB
; 标准错误日志文件备份数量
stderr_logfile_backups=5
; 进程优先级
priority=999
; 停止信号
stopsignal=INT
; 停止等待时间
stopwaitsecs=10
; 停止时是否杀死子进程
killasgroup=true
; 环境变量
environment=PYTHONPATH="/root/autodl-guard",PIP_INDEX_URL="https://pypi.tuna.tsinghua.edu.cn/simple",PIP_TRUSTED_HOST="pypi.tuna.tsinghua.edu.cn",HF_ENDPOINT="https://hf-mirror.com"

[group:autodl-guard-services]
programs=core-pipeline,framaist-milvus
priority=999 